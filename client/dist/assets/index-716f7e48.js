import{r,j as s}from"./index-62d4577c.js";import{I as c,B as g,m}from"./index-ff1d2bff.js";const N=()=>{const[t,h]=r.useState(""),[o,p]=r.useState(""),[a,l]=r.useState(!1),x=n=>{h(n.target.value)},j=n=>{p(n.target.value)},v=()=>{window.open("/register","_self")},i=async()=>{var d;if(!t||!o){m.warning("Please input username and pass");return}l(!0);const e=await(await fetch("/user/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,pass:o})})).json();e!=null&&e.success?(sessionStorage.setItem("sessionId",(d=e==null?void 0:e.data)==null?void 0:d.sessionId),window.open("/home","_self")):(m.error(e==null?void 0:e.data),l(!1))};return s.jsxs("div",{className:"login-page",children:[s.jsxs("div",{className:"header",children:[s.jsx("div",{className:"logo"}),s.jsx("div",{className:"title",children:"API Market"})]}),s.jsxs("div",{className:"form",children:[s.jsxs("div",{className:"kv",children:[s.jsx("div",{className:"label",children:"Username"}),s.jsx(c,{type:"text",placeholder:"Username",value:t,disabled:a,onChange:x,onPressEnter:()=>i()})]}),s.jsxs("div",{className:"kv",children:[s.jsx("div",{className:"label",children:"Pass"}),s.jsx(c,{type:"password",placeholder:"Pass",value:o,disabled:a,onChange:j,onPressEnter:()=>i()})]}),s.jsxs("div",{className:"operator",children:[s.jsx(g,{onClick:()=>i(),loading:a,children:"Log In"}),s.jsx(g,{onClick:()=>v(),disabled:a,children:"Go to Register"})]})]})]})};export{N as default};
